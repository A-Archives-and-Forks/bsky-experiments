version: "3.8"
services:
  graphd:
    build:
      context: ../../
      dockerfile: build/graphd/Dockerfile
    image: graphd
    restart: always
    environment:
      GRAPH_CSV: /data/follows.csv
      GRAPHDB_SQLITE_PATH: /data/graph.db
      EXPECTED_NODE_COUNT: 5_500_000
      GRAPHDB_SYNC_INTERVAL: 5s
    network_mode: host # For higher performance avoid the Docker Bridge
    volumes:
      - ../../data:/data
